<!DOCTYPE html>
<html>
  <head>
    <title>copyWithin Method Test</title>
  </head>
  <body>
<script src="../simpleTest.js"></script>
<script>

// Syntax: arr.copyWithin(target[, start[, end]])

// Parameters:
// target: Zero-based index at which to copy the sequence to. 
// If target is at or greater than arr.length, nothing will be copied. If target is positioned after start, the copied sequence will be trimmed to fit arr.length.

// start: [Optional] Zero-based index at which to start copying elements from. If negative, start will be counted from the end.
// If start is omitted, copyWithin will copy from index 0.

// end: [Optional] Zero-based index at which to end copying elements from. copyWithin copies up to but not including end. If negative, end will be counted from the end.
// If end is omitted, copyWithin will copy until the last index (default to arr.length).

// Return: The modified array.

// It should copy the values from start to end begining at the target index for an equal number of indexes.
// It should return a modified version of the original object.
// It should copy up to but not including end. 
// If negative, target will be counted from the end of the array.
// If target is at or greater than arr.length, nothing will be copied.
// If target is positioned after start, the copied sequence will be trimmed to fit arr.length.
// If negative, copyStart will be counted from the end.
// If copyStart is omitted, copyWithinTest will copy from index 0.
// If negative, copyEnd will be counted from the end of the array.
// If end is omitted, copyWithin will copy until the last index (default to arr.length).
// It should be intentionally generic, it does not require that its this value be an Array object.
// It should copy holes.

function copyWithinTest(obj, copyTo, copyStart, copyEnd) {
  var newObj = [];

  if (copyStart === undefined) {
    copyStart = 0;
  }
  
  if (copyEnd === undefined) {
    copyEnd = obj.length; 
  }else{
    copyEnd = copyEnd +1;
  }
  for(var a = 1; a < arguments.length; a++) {
    if (arguments[a] < 0) {
      arguments[a] = obj.length + arguments[a];
    }
  }

    if (copyTo !== copyStart) {
      for(var i = copyTo; i < copyEnd; i++) {
        if (copyStart <= copyEnd) {
            newObj[i] = obj[copyStart];
            copyStart++;
        }
      }
    }
    for(var v = copyTo; v < newObj.length; v++) {
        obj[v] = newObj[v];
      }
    return obj;
}

tests({
'It should copy the values from copyStart to copyEnd begining at the copyTo index for an equal number of indexes.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 1, 0, 2);
  eq(testObj[1], 0);
  eq(testObj[2], 1);
},
'It should return a modified version of the original object.': function() {
  var testObj = [0, 1, 2, 3];
  var result = copyWithinTest(testObj, 1, 0, 2);
  eq(testObj, result);
},
'It should copy up to but not including end.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 1, 0, 2);
  eq(testObj[2], 1);
  eq(testObj[3], 3);
},
'If negative, copyTo will be counted from the end.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, -3, 0, 2);
  eq(testObj[1], 0);
  eq(testObj[2], 1);
},
'If copyTo is at or greater than arr.length, nothing will be copied.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 4, 0, 2);
  eq(testObj[0], 0);
  eq(testObj[1], 1);
  eq(testObj[2], 2);
  eq(testObj[3], 3);
},
'If copyTo is positioned after copyStart, the copied sequence will be trimmed to fit arr.length.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 2, 1);
  eq(testObj[2], 1);
  eq(testObj[3], 2);
  eq(testObj.length, 4);
},
'If negative, copyStart will be counted from the end of the array.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, -2, 1);
  eq(testObj[2], 1);
  eq(testObj[3], 2);
  eq(testObj.length, 4);
},
'If copyStart is omitted, copyWithinTest will copy from index 0.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 1);
  eq(testObj[1], 0);
  eq(testObj[2], 1);
  eq(testObj[3], 2);
},
'If negative, end will be counted from the end of the array.': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 1, 0, -2);
  eq(testObj[1], 0);
  eq(testObj[2], 1);
  eq(testObj[3], 3);
},
'If end is omitted, copyWithin will copy until the last index (default to arr.length).': function() {
  var testObj = [0, 1, 2, 3];
  copyWithinTest(testObj, 2, 1); 
  eq(testObj[2], 1);
  eq(testObj[3], 2);
},
'It should be intentionally generic, it does not require that its this value be an Array object.': function() {
  var result = copyWithinTest.call([], {length: 4, 3: 1}, 1, 3);
  eq(result[1], 1);
  eq(result[3], 1);
  eq(result.length, 4);
},
'It should copy holes.': function() {
  var testObj = [0, , 2, 3];
  copyWithinTest(testObj, 2, 1); 
  eq(testObj[2], undefined);
  eq(testObj[3], 2);
},
});
</script>
</body>
</html>